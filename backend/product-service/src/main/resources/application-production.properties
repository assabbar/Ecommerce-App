## Product Service - Production Configuration (CosmosDB)

spring.application.name=product-service

# ==========================================
# MongoDB / CosmosDB Configuration (Production)
# ==========================================
# Connection to Azure CosmosDB with MongoDB API
# Variables provided by Kubernetes Secrets in production
spring.data.mongodb.uri=${COSMOSDB_URI}

# Or use individual properties if URI not available:
# spring.data.mongodb.host=${COSMOSDB_HOST}
# spring.data.mongodb.port=10255
# spring.data.mongodb.username=${COSMOSDB_USERNAME}
# spring.data.mongodb.password=${COSMOSDB_PASSWORD}
# spring.data.mongodb.database=ecom-mongo-db
# spring.data.mongodb.ssl=true

# Connection pool settings for production
spring.data.mongodb.auto-index-creation=true

# ==========================================
# Logging Configuration
# ==========================================
logging.level.root=INFO
logging.level.com.techie.microservices.product=DEBUG

# ==========================================
# Image Upload Configuration
# ==========================================
# Use mounted volume in Kubernetes
app.upload.dir=/app/uploads/images
app.image.base-url=/api/images

# ==========================================
# Swagger & API Documentation
# ==========================================
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.enabled=true

# ==========================================
# Monitoring & Metrics (Prometheus)
# ==========================================
# ==========================================
# Observability & Monitoring (Production)
# ==========================================
# TODO: In production, integrate with Azure Application Insights for tracing
# TODO: Use Azure Log Analytics for centralized logging
# Completely disable Zipkin to avoid connection errors
spring.zipkin.enabled=false
management.tracing.sampling.probability=0
management.observations.key-values.application=product-service

# ==========================================
# Loki Logging (DISABLED - use kubectl logs instead)
# ==========================================
# Logs are sent to stdout and captured by Kubernetes
logging.config=classpath:logback-spring.xml

# ==========================================
# Server Configuration
# ==========================================
server.port=8080
server.servlet.context-path=/api

# ==========================================
# Connection Timeout & Pool Size
# ==========================================
spring.data.mongodb.socket-timeout-ms=5000
spring.data.mongodb.connect-timeout-ms=10000
spring.data.mongodb.server-selection-timeout-ms=30000
spring.data.mongodb.max-pool-size=50
spring.data.mongodb.min-pool-size=10

# ==========================================
# Application Health Check
# ==========================================
management.endpoint.health.show-details=always
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true
